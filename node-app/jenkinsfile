pipeline {
  agent any
  stages{
     stages {
        stage('Checkout SCM') {
            steps {
                script {
                    def scmVars = checkout scm
                    echo "Checked out ${scmVars.GIT_URL} with branch ${scmVars.GIT_BRANCH}"
                }
            }
        }
    stage('Clone the repos'){
      steps{
        echo 'cloning the repository'
        git 'https://github.com/aljozy/assignment-problem.git'
    }
    }
    stage('Build'){
      steps{
        echo "Build the application on docker"
        sh 'docker build . -t preview:v1'

      }
    }
    stage('Deploy'){
      steps{
        echo "Deploying the app on the port 3000"
       sh 'docker run -d  --rm -p 3000:3000'
      }
    }
  }
 
  }

